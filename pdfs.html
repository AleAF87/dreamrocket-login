<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDFs</title>
  <style>
    body { font-family: Arial; padding:20px; }
    .container { display:flex; gap:20px; }
    select { width:250px; height:300px; }
    iframe { width:500px; height:500px; border:1px solid #aaa; }
    button { padding:10px 15px; margin-top:10px; }
  </style>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "SUA_APIKEY_AQUI",
      authDomain: "SEU_AUTHDOMAIN.firebaseapp.com",
      projectId: "SEU_PROJECTID",
      storageBucket: "SEU_BUCKET.appspot.com",
      messagingSenderId: "SEU_SENDER_ID",
      appId: "SEU_APP_ID"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>

<body>

<h2>Visualizar PDFs</h2>

<div class="container">
  <div>
    <select id="listaPDF" size="15" onclick="mostrarPDF()"></select>
    <button onclick="baixarPDF()">Baixar PDF</button>
  </div>

  <div>
    <iframe id="visorPDF"></iframe>
  </div>
</div>

<script>
let pdfs = [];

window.onload = function() {
  db.collection("pdfs").get().then(snapshot => {
    snapshot.forEach(doc => {
      pdfs.push({ id: doc.id, ...doc.data() });
    });

    const lista = document.getElementById("listaPDF");
    pdfs.forEach((pdf, index) => {
      let opt = document.createElement("option");
      opt.value = index;
      opt.textContent = pdf.titulo;
      lista.appendChild(opt);
    });
  });
}

function mostrarPDF() {
  let i = document.getElementById("listaPDF").value;
  document.getElementById("visorPDF").src = pdfs[i].hash;
}

function baixarPDF() {
  let i = document.getElementById("listaPDF").value;

  let link = document.createElement("a");
  link.href = pdfs[i].hash;
  link.download = pdfs[i].titulo + ".pdf";
  link.click();
}
</script>

</body>
</html>
